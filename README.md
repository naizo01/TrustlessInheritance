# TrustlessInheritance

TrustlessInheritanceは、ブロックチェーン上で安全かつプライバシーを保護しながら資産の相続を可能にするスマートコントラクトシステムです。

## プロジェクト概要

このプロジェクトは、以下の主要コンポーネントで構成されています：

1. スマートコントラクト
2. フロントエンドアプリケーション
3. ゼロ知識証明（ZK Proof）システム

## 主な機能

- **パートナー証明の確立**: 相続者と被相続者が秘密情報を共有し、ハッシュ化して登録
- **トークン転送許可の設定**: 被相続者がスマートコントラクトにトークンの承認を行う
- **相続プロセスの開始**: 相続者がZK証明を提出し、相続プロセスを開始
- **トークンのロックと引き出し**: 一定期間のロック後、相続者がトークンを引き出し可能

## スマートコントラクト

### InheritanceFactory

InheritanceFactoryは、InheritanceContractのプロキシをデプロイし、初期化を行うコントラクトです。

主な機能:
- 新しいInheritanceContractのプロキシをデプロイ
- デプロイされたコントラクトの初期化
- デプロイされたコントラクトのアドレス管理

### InheritanceContract

InheritanceContractは、相続プロセス全体を管理する中心的なコントラクトです。ERC7546を使用して構築され、1ユーザーにつき1つのプロキシとして実装されています。

主な機能:
- **initialize**: 相続元がハッシュ値とロック期間を設定
- **addApprovedTokens**: 新しいトークンを承認リストに追加
- **initiateInheritance**: 相続先が相続プロセスを開始し、ZK証明を提出
- **withdrawTokens**: ロック期間終了後、Bobがトークンを引き出し
- **cancelInheritance**: 相続元が相続プロセスをキャンセル

主な変数:
- `address owner`: 相続元のアドレス
- `bytes32 hash`: 生成したハッシュ
- `bool isLocked`: 相続が進行中かどうかを管理
- `uint256 lockDuration`: トークンのロック期間
- `uint256 lockStartTime`: トークンロックが開始された日時
- `address[] public approvedTokens`: 承認されたトークンのリスト

## フロントエンド

Next.jsを使用したフロントエンドアプリケーションで、以下の主要機能を提供します：

- トークンの承認
- 相続プロセスの開始
- トークンの引き出し
- 相続のキャンセル

主要コンポーネント:
- CreateProxyButton: 新しいプロキシコントラクトを作成
- ApproveToken: トークンの承認を行う
- InitiateInheritanceButton: 相続プロセスを開始
- WithdrawTokensButton: ロック解除後にトークンを引き出す
- CancelInheritanceButton: 相続プロセスをキャンセル

## セキュリティと検証

- ZK証明を使用して相続者の正当性を検証
- 署名ベースの検証オプションも提供

## 開発者向け情報

- プロジェクトはNext.jsとTailwind CSSを使用しています
- スマートコントラクトの開発にはSolidityを使用しています
- フロントエンドとスマートコントラクトの接続にはwagmiライブラリを使用しています

## 貢献

プロジェクトへの貢献を歓迎します。プルリクエストを送信する前に、既存の問題をチェックするか、新しい問題を作成してください。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。